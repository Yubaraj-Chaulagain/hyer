<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <style>
  body {
    font-family: Arial, sans-serif;
    background: #f2f4f7;
    margin: 0;
    padding: 10px;
  }

  .container {
    max-width: 1200px;
    margin: auto;
    background: #fff;
    padding: 14px 18px;
    border-radius: 8px;
    box-shadow: 0 3px 10px rgba(0,0,0,.08);
  }

  h3 {
    margin: 16px 0 8px;
    padding: 6px 10px;
    background: #2563eb;
    color: #fff;
    font-size: 14px;
    border-radius: 4px;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px 12px;
  }

  label {
    font-size: 12px;
    font-weight: 600;
    margin-bottom: 2px;
    display: block;
  }

  input, select, textarea {
    width: 100%;
    padding: 5px 7px;
    font-size: 12px;
    border-radius: 4px;
    border: 1px solid #ccc;
  }

  textarea {
    resize: none;
    height: 40px;
  }

  .span2 { grid-column: span 2; }
  .span3 { grid-column: span 3; }
  .span4 { grid-column: span 4; }

  button {
    margin-top: 12px;
    width: 100%;
    padding: 8px;
    font-size: 14px;
    background: #2563eb;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  button:hover {
    background: #1e40af;
  }

  @media (max-width: 1024px) {
    .grid { grid-template-columns: repeat(2, 1fr); }
    .span2,.span3,.span4 { grid-column: span 2; }
  }
</style>

</head>
<body>
<h3>welcome my dashboard</h3>
<label>Member ID</label>
<input id="MemberID" placeholder="M001" required>

<label>Full Name</label>
<input id="FullName">

<label>Father Name</label>
<input id="FatherName">

<label>Husband / Wife Name</label>
<input id="HusbandWifeName">

<label>Grandfather Name</label>
<input id="GrandfatherName">

<label>Date of Birth</label>
<input type="date" id="DOB">

<label>Gender</label>
<select id="Gender">
  <option>Male</option>
  <option>Female</option>
  <option>Other</option>
</select>

<label>Marital Status</label>
<select id="MaritalStatus">
  <option>Single</option>
  <option>Married</option>
  <option>Widowed</option>
</select>

<label>Citizenship No</label>
<input id="CitizenshipNo">

<label>Citizenship District</label>
<select id="CitizenshipDistrict">
  <option value="">Select District</option>
</select>


<label>Citizenship Issue Date</label>
<input type="date" id="CitizenshipIssueDate">

<label>Nationality</label>
<input id="Nationality" value="Nepali">

<h3>Address</h3>

<label>Province</label>
<select id="Province"></select>

<label>District</label>
<select id="District"></select>

<label>Municipality</label>
<select id="Municipality"></select>

<label>Ward No</label>
<select id="WardNo"></select>

<label>Permanent Address</label>
<input id="PermanentAddress">

<h3>Contact</h3>

<label>Mobile</label>
<input id="Mobile">

<label>Email</label>
<input id="Email">

<h3>Membership</h3>

<label>Membership Type</label>
<select id="MembershipType">
  <option>General</option>
  <option>Saving</option>
  <option>Loan</option>
</select>

<label>Join Date</label>
<input type="date" id="JoinDate">

<label>Share Qty</label>
<input type="number" id="ShareQty">

<label>Share Amount</label>
<input type="number" id="ShareAmount">

<label>Membership Fee</label>
<input type="number" id="MembershipFee">

<label>Member Status</label>
<select id="MemberStatus">
  <option>Active</option>
  <option>Inactive</option>
</select>

<h3>Nominee</h3>

<label>Nominee Name</label>
<input id="NomineeName">

<label>Nominee Relation</label>
<select id="NomineeRelation">
  <option>Father</option>
  <option>Mother</option>
  <option>Spouse</option>
  <option>Son</option>
  <option>Daughter</option>
</select>

<label>Nominee Citizenship</label>
<input id="NomineeCitizenship">

<label>Nominee Phone</label>
<input id="NomineePhone">

<label>Nominee Address</label>
<input id="NomineeAddress">

<h3>Uploads (IMGBB)</h3>

<label>Photo</label>
<input type="file" onchange="upload(this,'PhotoURL')">
<input id="PhotoURL">

<label>Citizenship File</label>
<input type="file" onchange="upload(this,'CitizenshipFileURL')">
<input id="CitizenshipFileURL">

<label>Signature</label>
<input type="file" onchange="upload(this,'SignatureURL')">
<input id="SignatureURL">

<h3>Other</h3>

<label>Occupation</label>
<select id="Occupation">
  <option>Business</option>
  <option>Service</option>
  <option>Agriculture</option>
  <option>Foreign Employment</option>
</select>

<label>Income Source</label>
<input id="IncomeSource">

<label>Role</label>
<select id="Role">
  <option>Member</option>
  <option>Staff</option>
  <option>Admin</option>
</select>

<label>Remarks</label>
<textarea id="Remarks"></textarea>

<button onclick="submitForm()">Submit</button>

<script>
const ADMIN_URL = "https://fulkumari.com.np/sheettoweb/nepal-admin-structure.json";
const IMGBB_KEY = "f5d95811959fdcd59c8ea459aadb650b";
let adminData = {};

const Province = document.getElementById("Province");
const District = document.getElementById("District");
const Municipality = document.getElementById("Municipality");
const CitizenshipDistrict = document.getElementById("CitizenshipDistrict");
const WardNo = document.getElementById("WardNo");

fetch(ADMIN_URL)
  .then(res => res.json())
  .then(data => {
    adminData = data;

    // Province
    Province.innerHTML = `<option value="">Select Province</option>`;
    Object.keys(adminData).forEach(p => {
      Province.innerHTML += `<option value="${p}">${p}</option>`;
    });

    // Citizenship District (ALL 77)
    const districtSet = new Set();
    Object.values(adminData).forEach(prov =>
      Object.keys(prov).forEach(d => districtSet.add(d))
    );

    CitizenshipDistrict.innerHTML = `<option value="">Select District</option>`;
    [...districtSet].sort().forEach(d => {
      CitizenshipDistrict.innerHTML += `<option value="${d}">${d}</option>`;
    });
  });

// Address cascade
Province.onchange = () => {
  District.innerHTML = `<option value="">Select District</option>`;
  Municipality.innerHTML = `<option value="">Select Municipality</option>`;

  if (!Province.value) return;

  Object.keys(adminData[Province.value]).forEach(d => {
    District.innerHTML += `<option value="${d}">${d}</option>`;
  });
};

District.onchange = () => {
  Municipality.innerHTML = `<option value="">Select Municipality</option>`;

  if (!District.value) return;

  adminData[Province.value][District.value].forEach(m => {
    Municipality.innerHTML += `<option value="${m}">${m}</option>`;
  });
};

// Ward 1â€“35
WardNo.innerHTML = `<option value="">Select Ward</option>`;
for (let i = 1; i <= 35; i++) {
  WardNo.innerHTML += `<option value="${i}">${i}</option>`;
}

// IMGBB upload
function upload(input, target) {
  const r = new FileReader();
  r.onloadend = () => {
    fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_KEY}`, {
      method: "POST",
      body: new URLSearchParams({
        image: r.result.split(",")[1]
      })
    })
    .then(res => res.json())
    .then(d => document.getElementById(target).value = d.data.url);
  };
  r.readAsDataURL(input.files[0]);
}

// Submit
function submitForm() {
  const data = {};
  document.querySelectorAll("input,select,textarea")
    .forEach(e => data[e.id] = e.value);

  data.Username = data.MemberID;
  data.Password = data.Mobile;

  google.script.run.saveMember(data);
}
</script>


</body>
</html>
