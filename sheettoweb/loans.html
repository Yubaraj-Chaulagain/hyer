<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Loan Approval System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body{background:#f1f5f9}
.card{border-radius:14px}
.tab{display:none}
.tab.active{display:block}
</style>
</head>
<body class="p-3">

<h3 class="text-center mb-3">üè¶ Loan Approval System</h3>

<div class="text-center mb-3">
<button class="btn btn-primary" onclick="showTab('staff')">Staff Request</button>
<button class="btn btn-warning" onclick="showTab('manager')">Manager Approve</button>
<button class="btn btn-success" onclick="showTab('admin')">Admin Final</button>
</div>

<!-- ================= STAFF ================= -->
<div id="staff" class="tab active">
<div class="card p-3">
<h5>Loan Request</h5>
<input id="sMember" class="form-control mb-2" placeholder="Member ID">
<input id="sAmount" class="form-control mb-2" placeholder="Amount">
<input id="sMonths" class="form-control mb-2" placeholder="Months">
<input id="sStaff" class="form-control mb-2" placeholder="Staff Name">
<button class="btn btn-primary" onclick="requestLoan()">Send Request</button>
<div id="sMsg" class="mt-2 text-success"></div>
</div>
</div>

<!-- ================= MANAGER ================= -->
<div id="manager" class="tab">
<div class="card p-3">
<h5>Manager Approval</h5>
<input id="mRequest" class="form-control mb-2" placeholder="Request ID">
<input id="mName" class="form-control mb-2" placeholder="Manager Name">
<button class="btn btn-warning" onclick="managerApprove()">Approve</button>
<div id="mMsg" class="mt-2 text-success"></div>
</div>
</div>

<!-- ================= ADMIN ================= -->
<div id="admin" class="tab">
<div class="card p-3">
<h5>Admin Final Approval</h5>
<input id="aRequest" class="form-control mb-2" placeholder="Request ID">
<input id="aName" class="form-control mb-2" placeholder="Admin Name">
<button class="btn btn-success" onclick="adminApprove()">Approve & Add Loan</button>
<div id="aMsg" class="mt-2 text-success"></div>
</div>
</div>

<script>
const scriptURL = "YOUR_APPS_SCRIPT_URL";

function showTab(id){
 document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
 document.getElementById(id).classList.add('active');
}

// ================= STAFF REQUEST =================
function requestLoan(){
fetch(scriptURL,{method:"POST",body:JSON.stringify({
 action:"requestLoan",
 MemberID:document.getElementById("sMember").value,
 Amount:document.getElementById("sAmount").value,
 Months:document.getElementById("sMonths").value,
 RequestedBy:document.getElementById("sStaff").value
})})
.then(r=>r.json())
.then(d=>document.getElementById("sMsg").innerText="Request Sent ‚úî ID: "+d.RequestID);
}

// ================= MANAGER =================
function managerApprove(){
fetch(scriptURL,{method:"POST",body:JSON.stringify({
 action:"managerApprove",
 RequestID:document.getElementById("mRequest").value,
 Manager:document.getElementById("mName").value
})})
.then(r=>r.json())
.then(()=>document.getElementById("mMsg").innerText="Manager Approved ‚úî");
}

// ================= ADMIN =================
function adminApprove(){
fetch(scriptURL,{method:"POST",body:JSON.stringify({
 action:"adminApproveLoan",
 RequestID:document.getElementById("aRequest").value,
 Admin:document.getElementById("aName").value
})})
.then(r=>r.json())
.then(d=>document.getElementById("aMsg").innerText="Loan Added ‚úî LoanID: "+d.LoanID);
}
</script>
</body>
</html>
