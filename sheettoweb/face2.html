<!DOCTYPE html>
<html>
<head>
  <title>Face Attendance</title>
  <script defer src="https://cdn.jsdelivr.net/npm/face-api.js"></script>
</head>
<body>

<h2>Face Attendance</h2>
<video id="video" width="400" autoplay playsinline muted></video>
<br>
<button id="markAttendanceBtn">Mark Attendance</button>
<script>
const video = document.getElementById('video');
const markAttendanceBtn = document.getElementById('markAttendanceBtn');

let labeledDescriptors = [];
let currentStream = null;

async function startCamera(mode = "environment") {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({
      video: true,
      audio: false
    });

    video.srcObject = stream;
    currentStream = stream;

  } catch (err) {
    alert("Camera error: " + err.message);
  }
}

// camera first
startCamera();

// ===== Optional parts below =====
async function loadModels() {
  try {
    await faceapi.nets.tinyFaceDetector.loadFromUri('/models');
    await faceapi.nets.faceLandmark68Net.loadFromUri('/models');
    await faceapi.nets.faceRecognitionNet.loadFromUri('/models');
  } catch(e) {
    console.log("Model load skipped");
  }
}

async function markAttendance() {
  alert("Camera working. Face detection next step.");
}

markAttendanceBtn.addEventListener('click', markAttendance);
</script>


</body>
</html>
