<!DOCTYPE html>
<html>
<head>
<title>Login System</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
.hidden{display:none}
</style>
</head>
<body class="p-4">

<!-- LOGIN -->
<div id="loginBox" class="col-md-4 mx-auto">
  <h4>ğŸ” Login</h4>
  <input id="user" class="form-control mb-2" placeholder="Username">
  <input id="pass" type="password" class="form-control mb-2" placeholder="Password">
  <button class="btn btn-primary w-100" onclick="login()">Login</button>
</div>

<!-- ADMIN -->
<div id="adminUI" class="hidden">
  <h3>ğŸ‘‘ Admin Dashboard</h3>
</div>

<!-- STAFF -->
<div id="staffUI" class="hidden">
  <h3>ğŸ§‘â€ğŸ’¼ Staff Dashboard</h3>
</div>

<!-- MEMBER -->
<div id="memberUI" class="hidden">
  <h3>ğŸ‘¤ Member Dashboard</h3>
  <div id="myInfo"></div>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbw8w2n-ZTW0ojkJkt5VCKLkj5PN3qH2NFe0tZ-ZUB-UP3HsEAAQpkMKyLik4nxnQMSL/exec";

function login(){
  const u = user.value.trim();
  const p = pass.value.trim();

  if(!u || !p){
    alert("Enter username & password");
    return;
  }

  fetch(API,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      action:"login",
      user:u,
      pass:p
    })
  })
  .then(r=>r.json())
  .then(d=>{
    if(!d.ok){
      alert("âŒ "+d.error);
      return;
    }

    loginBox.classList.add("hidden");

    if(d.role==="admin"){
      adminUI.classList.remove("hidden");
    }
    else if(d.role==="staff"){
      staffUI.classList.remove("hidden");
    }
    else if(d.role==="member"){
      memberUI.classList.remove("hidden");
      myInfo.innerHTML = "MemberID: <b>"+d.memberId+"</b>";
    }
  })
  .catch(err=>alert("API error"));
}
</script>

</body>
</html>
